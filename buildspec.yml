version: 0.2

env:
   variables:
      EXTRA_CFLAGS: $RPM_OPT_FLAGS
      EXTRA_LDFLAGS: $RPM_LD_FLAGS

phases:
   install:
      commands:
       - yum -y install redhat-rpm-config make gcc
   pre_build:
      commands:
       - cd src
   build:
      commands:
       - make -j2 bin-x86_64-efi/ipxe.usb
       - make -j2 bin-x86_64-pcbios/ipxe.usb

artifacts:
   files:
    - src/bin-x86_64-efi/ipxe.usb
    - src/bin-x86_64-pcbios/ipxe.usb
   discard-paths: no
